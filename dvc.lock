schema: '2.0'
stages:
  annotator_performance:
    cmd: poetry run papermill code/01-annotator_performance.ipynb code/01-annotator_performance.ipynb
    deps:
    - path: code/01-annotator_performance.ipynb
      hash: md5
      md5: 578fda66a01a2c9b19ec6a2d519fa637
      size: 19647
    - path: data/labeled_data/full.csv.zip
      hash: md5
      md5: deb1823412f6e35fd2ad67c90e0dec13
      size: 1082555
    outs:
    - path: results/tables/coder_agreement.tex
      hash: md5
      md5: 728d500870ac7eba87e75f057f760278
      size: 649
  run_model:
    cmd: poetry run papermill code/02-create_gbert_model.ipynb code/02-create_gbert_model.ipynb
    deps:
    - path: code/02-create_gbert_model.ipynb
      hash: md5
      md5: 8696215f00a6a4c0485086dfc3572430
      size: 760255
    - path: data/labeled_data/test.csv.zip
      hash: md5
      md5: 33076ef99b0d2f2caad8cbbe01cd9239
      size: 214424
    - path: data/labeled_data/train.csv.zip
      hash: md5
      md5: 2e42df91f747a5225a5c4c8fd09adc17
      size: 867879
    - path: src/bert
      hash: md5
      md5: 6769d16e89b659a7d99d77495a166899.dir
      size: 69867
      nfiles: 17
    outs:
    - path: results/popbert_model/
      hash: md5
      md5: f02b30e858558b875352c7fb92e7ece6.dir
      size: 1343007526
      nfiles: 2
  create_predictions:
    cmd: poetry run papermill code/03-make_predictions.ipynb code/03-make_predictions.ipynb
    deps:
    - path: code/03-make_predictions.ipynb
      hash: md5
      md5: 37a365ba00f454afda1739ea1c45462a
      size: 7205
    - path: data/raw/sentences.parquet.gzip
      hash: md5
      md5: eea45c4de44ce8cfdb0b0aed6a0900e9
      size: 55634865
    outs:
    - path: data/interim/sentence_predictions.parquet.gzip
      hash: md5
      md5: 946b9cbd8107abbac32bf6938927fc83
      size: 24372099
  create_gbert_model:
    cmd: poetry run papermill code/02-create_gbert_model.ipynb code/02-create_gbert_model.ipynb
    deps:
    - path: code/02-create_gbert_model.ipynb
      hash: md5
      md5: 313691f4528d95ee42b94942960e1753
      size: 760256
    - path: data/labeled_data/test.csv.zip
      hash: md5
      md5: 33076ef99b0d2f2caad8cbbe01cd9239
      size: 214424
    - path: data/labeled_data/train.csv.zip
      hash: md5
      md5: 2e42df91f747a5225a5c4c8fd09adc17
      size: 867879
    - path: src/bert
      hash: md5
      md5: 6769d16e89b659a7d99d77495a166899.dir
      size: 69867
      nfiles: 17
    outs:
    - path: results/popbert_model/
      hash: md5
      md5: aed0fd5dc85db0d21119e231cfba25dd.dir
      size: 1343007526
      nfiles: 2
  make_predictions:
    cmd: poetry run papermill code/03-make_predictions.ipynb code/03-make_predictions.ipynb
    deps:
    - path: code/03-make_predictions.ipynb
      hash: md5
      md5: bf6b6a33deeb582ba0a2f40cb5983889
      size: 7205
    - path: data/raw/sentences.parquet.gzip
      hash: md5
      md5: 09ee7bf292843ddf879bfda6c854baac
      size: 55639885
    outs:
    - path: data/interim/sentence_predictions.parquet.gzip
      hash: md5
      md5: aa4653b64ceff2094d5d0f43c5a525e6
      size: 24316246
  all_dimensions:
    cmd: poetry run papermill code/04-all_dimensions.ipynb code/04-all_dimensions.ipynb
    deps:
    - path: code/04-all_dimensions.ipynb
      hash: md5
      md5: 7f3426aeb1fa829b75f8a064994018d8
      size: 116972
    - path: data/interim/sentence_predictions.parquet.gzip
      hash: md5
      md5: aa4653b64ceff2094d5d0f43c5a525e6
      size: 24316246
    - path: data/raw/sentences.parquet.gzip
      hash: md5
      md5: 09ee7bf292843ddf879bfda6c854baac
      size: 55639885
    outs:
    - path: results/figures/all_dimensions_normalized.pdf
      hash: md5
      md5: 07de5d0ee972fb3d0ace2ddea3cc6d26
      size: 10284
  run_gruendl:
    cmd: Rscript code/07-run_gruendl.R
    deps:
    - path: code/07-run_gruendl.R
      hash: md5
      md5: 3b59f9d0ba7237600377fd7203f733e7
      size: 613
    - path: data/raw/sentences.parquet.gzip
      hash: md5
      md5: 09ee7bf292843ddf879bfda6c854baac
      size: 55639885
    outs:
    - path: data/interim/gruendl.parquet.gzip
      hash: md5
      md5: 451cdbb3b7aad19deb48034cb9ef6a58
      size: 2753804
  selected_examples:
    cmd: poetry run papermill code/08-selected_examples_table.ipynb code/08-selected_examples_table.ipynb
    deps:
    - path: code/08-selected_examples_table.ipynb
      hash: md5
      md5: 07f69be18759d3b16bbee42e86f1a192
      size: 18276
    - path: data/interim/gruendl.parquet.gzip
      hash: md5
      md5: 451cdbb3b7aad19deb48034cb9ef6a58
      size: 2753804
    - path: data/interim/sentence_predictions.parquet.gzip
      hash: md5
      md5: aa4653b64ceff2094d5d0f43c5a525e6
      size: 24316246
    - path: data/raw/sentences.parquet.gzip
      hash: md5
      md5: 09ee7bf292843ddf879bfda6c854baac
      size: 55639885
    outs:
    - path: results/tables/selected_examples.tex
      hash: md5
      md5: 018e6183704b436600fd8d03e4806bb9
      size: 3202
